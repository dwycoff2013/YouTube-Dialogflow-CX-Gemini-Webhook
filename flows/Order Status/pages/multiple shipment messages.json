{
  "name": "6d947855-1aeb-4164-b9e2-fbb7a24a72c7",
  "displayName": "multiple shipment messages",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "$flow.ship_product_count",
      "value": "$flow.order_shipment_product_count[$sys.func.TO_NUMBER($flow.shipment_counter)]"
    }, {
      "parameter": "$flow.current_ship_status",
      "value": "$flow.order_shipment_status[$sys.func.TO_NUMBER($flow.shipment_counter)]"
    }, {
      "parameter": "$flow.remaining_items",
      "value": "$sys.func.MINUS($sys.func.TO_NUMBER($flow.ship_product_count),2)"
    }, {
      "parameter": "$flow.shipment_index_counter",
      "value": "$sys.func.ADD($sys.func.TO_NUMBER($flow.shipment_index_counter),1)"
    } ]
  },
  "transitionRoutes": [ {
    "condition": "$flow.shipment_counter \u003c $flow.max_shipment AND $flow.ship_product_count = 1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "$flow.shipment_counter",
        "value": "$sys.func.ADD($flow.shipment_counter,1)"
      }, {
        "parameter": "$flow.display_counter",
        "value": "$flow.product_counter"
      }, {
        "parameter": "$flow.product_counter",
        "value": "$sys.func.ADD($sys.func.TO_NUMBER($flow.ship_product_count), 0)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$flow.current_ship_status = $flow.tracking_status_delivered",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] was $flow.current_ship_status on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_shipment_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status = $flow.tracking_status_returned OR $flow.current_ship_status = $flow.tracking_status_partially_returned",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] was delivered on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_shipment_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e and is now $flow.current_ship_status.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status = $flow.tracking_status_cancelled",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "The shipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] is $flow.current_ship_status." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status != $flow.tracking_status_delivered",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] is $flow.current_ship_status and will be delivered by \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.shipment_estimated_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "targetPage": "multiple shipment messages",
    "name": "085e1650-d88e-4c3b-bb07-a5a24f0e760f"
  }, {
    "condition": "$flow.shipment_counter \u003c $flow.max_shipment AND $flow.ship_product_count = 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "$flow.shipment_counter",
        "value": "$sys.func.ADD($flow.shipment_counter,1)"
      }, {
        "parameter": "$flow.display_counter",
        "value": "$flow.product_counter"
      }, {
        "parameter": "$flow.second_product_counter",
        "value": "$sys.func.ADD($sys.func.TO_NUMBER($flow.display_counter),1)"
      }, {
        "parameter": "$flow.product_counter",
        "value": "$sys.func.ADD($sys.func.TO_NUMBER($flow.ship_product_count), 0)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$flow.current_ship_status = $flow.tracking_status_delivered",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] and $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] was $flow.current_ship_status on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_shipment_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status = $flow.tracking_status_returned OR $flow.current_ship_status = $flow.tracking_status_partially_returned",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] and $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] was delivered on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_shipment_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e and is now $flow.current_ship_status.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status = $flow.tracking_status_cancelled",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Shipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] and $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] is $flow.current_ship_status." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status != $flow.tracking_status_delivered",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)] and $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] is $flow.current_ship_status and will be delivered by \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.shipment_estimated_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]test\u003c/say-as\u003e.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "targetPage": "multiple shipment messages",
    "name": "2bd47803-d9b2-48c2-a456-28ff93a1006d"
  }, {
    "condition": "$flow.shipment_counter \u003c $flow.max_shipment AND $flow.ship_product_count \u003e 2",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "$flow.shipment_counter",
        "value": "$sys.func.ADD($flow.shipment_counter,1)"
      }, {
        "parameter": "$flow.display_counter",
        "value": "$flow.product_counter"
      }, {
        "parameter": "$flow.second_product_counter",
        "value": "$sys.func.ADD($sys.func.TO_NUMBER($flow.display_counter),1)"
      }, {
        "parameter": "$flow.product_counter",
        "value": "$sys.func.ADD($sys.func.TO_NUMBER($flow.ship_product_count), 0)"
      } ],
      "conditionalCases": [ {
        "cases": [ {
          "condition": "$flow.current_ship_status = $flow.tracking_status_delivered",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)], $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] and $flow.remaining_items other items was $flow.current_ship_status on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_shipment_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status = $flow.tracking_status_returned OR $flow.current_ship_status = $flow.tracking_status_partially_returned",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)], $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] and $flow.remaining_items other items was $flow.current_ship_status on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_shipment_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e is now $flow.current_ship_status.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status = $flow.tracking_status_cancelled",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "Shipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)], $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] and $flow.remaining_items other items is $flow.current_ship_status." ]
              },
              "languageCode": "en"
            }
          } ]
        }, {
          "condition": "$flow.current_ship_status != $flow.tracking_status_delivered",
          "caseContent": [ {
            "message": {
              "text": {
                "text": [ "\u003cspeak\u003eShipment $flow.shipment_counter containing $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.display_counter)], $flow.order_shipment_product_name[$sys.func.TO_NUMBER($flow.second_product_counter)] and $flow.remaining_items other items is $flow.current_ship_status and will be delivered by \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.shipment_estimated_delivery_date[$sys.func.TO_NUMBER($flow.shipment_index_counter)]\u003c/say-as\u003e.\u003c/speak\u003e" ]
              },
              "languageCode": "en"
            }
          } ]
        } ]
      } ]
    },
    "targetPage": "multiple shipment messages",
    "name": "371e12e9-1b31-4d53-8c80-dbd2bc9648f7"
  }, {
    "condition": "$flow.shipment_counter = $flow.max_shipment",
    "triggerFulfillment": {
    
    },
    "targetPage": "\u003e confirm SMS required",
    "name": "5d87a103-5fb3-4510-9fdd-df4144d7ecb8"
  } ]
}
