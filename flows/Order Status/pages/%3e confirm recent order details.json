{
  "name": "ff33f066-ed86-47dd-96c5-8a6255305623",
  "displayName": "\u003e confirm recent order details",
  "form": {
  
  },
  "entryFulfillment": {
    "setParameterActions": [ {
      "parameter": "$flow.remaining_product_count",
      "value": "$sys.func.MINUS($flow.order_product_count, 2)"
    }, {
      "parameter": "$flow.last_five_digit_of_order_id",
      "value": "$sys.func.MID($flow.order_id,$sys.func.MINUS($sys.func.LEN($flow.order_id),4),5)"
    } ],
    "conditionalCases": [ {
      "cases": [ {
        "condition": "$flow.order_product_count = 1",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eOkay, $session.params.user_first_name. Are you calling about your most recent order for $flow.order_customer_billing_name containing $flow.order_product_name[0] item placed on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_date\u003c/say-as\u003e at \u003csay-as interpret-as=\"time\" format=\"hms12\"\u003e$flow.order_time\u003c/say-as\u003e?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$flow.order_product_count = 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eOkay, $session.params.user_first_name. Are you calling about your most recent order for $flow.order_customer_billing_name containing $flow.order_product_name[0] and $flow.order_product_name[1] items placed on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_date\u003c/say-as\u003e at \u003csay-as interpret-as=\"time\" format=\"hms12\"\u003e$flow.order_time\u003c/say-as\u003e?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        } ]
      }, {
        "condition": "$flow.order_product_count \u003e 2",
        "caseContent": [ {
          "message": {
            "text": {
              "text": [ "\u003cspeak\u003eOkay, $session.params.user_first_name. Are you calling about your most recent order for $flow.order_customer_billing_name containing $flow.order_product_name[0], $flow.order_product_name[1] and $flow.remaining_product_count other items placed on \u003csay-as interpret-as=\"date\" format=\"yyyymmdd\" detail=\"1\"\u003e$flow.order_date\u003c/say-as\u003e at \u003csay-as interpret-as=\"time\" format=\"hms12\"\u003e$flow.order_time\u003c/say-as\u003e?\u003c/speak\u003e" ]
            },
            "languageCode": "en"
          }
        } ]
      } ]
    } ]
  },
  "transitionRoutes": [ {
    "intent": "prebuilt_components_confirmation_yes_1",
    "triggerFulfillment": {
    
    },
    "targetPage": "check multiple shipments",
    "name": "3d203311-6f4c-4a97-af36-8c3033a67c00"
  }, {
    "intent": "prebuilt_components_confirmation_no_1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "$flow.order_option",
        "value": null
      }, {
        "parameter": "$flow.order_id",
        "value": null
      }, {
        "parameter": "$flow.check_recent_order_details",
        "value": "false"
      } ]
    },
    "targetPage": "\u003e collect order ID",
    "name": "e0381721-f2ca-4ec9-9dde-60cbab34b137"
  }, {
    "intent": "prebuilt_components_escalate_human_agent_1",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "transfer_reason",
        "value": "agent"
      } ]
    },
    "targetPage": "end escalation",
    "name": "7577bdd4-fd6a-427c-b175-c0efe9f9f0a7"
  }, {
    "intent": "prebuilt_components_denial_of_information",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "transfer_reason",
        "value": "denial_of_information"
      } ]
    },
    "targetPage": "end failure",
    "name": "e926a49d-eb76-4f06-bff9-ba312db4c40f"
  } ],
  "eventHandlers": [ {
    "event": "sys.no-input-1",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, we were not able to hear you. Are you calling about your most recent order for $flow.order_customer_billing_name? Please say yes or no." ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "ea4af6f4-d001-4c9a-ba2c-d893e0d0e4f0"
  }, {
    "event": "sys.no-input-2",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Hmm, we still cannot hear you. Are you calling about your most recent order for $flow.order_customer_billing_name? Please say yes or no." ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "c1423f78-cefb-4aed-8b00-a0004197c72a"
  }, {
    "targetPage": "end failure",
    "event": "sys.no-input-default",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "transfer_reason",
        "value": "max_no_input"
      } ]
    },
    "name": "ecffd60a-2ef0-4d3a-afb1-3ee6bf467483"
  }, {
    "event": "sys.no-match-1",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, we didnâ€™t get that. Are you calling about your most recent order for $flow.order_customer_billing_name? Please say yes or no." ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "7200d3b4-dcac-44aa-9071-8a211088637d"
  }, {
    "event": "sys.no-match-2",
    "triggerFulfillment": {
      "messages": [ {
        "text": {
          "text": [ "Sorry, we're still not getting that. Are you calling about your most recent order for $flow.order_customer_billing_name? Please say yes or no." ]
        },
        "languageCode": "en"
      } ]
    },
    "name": "98de6aec-43c8-4cd9-8d50-32b320ec7bce"
  }, {
    "targetPage": "end failure",
    "event": "sys.no-match-default",
    "triggerFulfillment": {
      "setParameterActions": [ {
        "parameter": "transfer_reason",
        "value": "max_no_match"
      } ]
    },
    "name": "78b08ea7-3f91-42ad-a745-62c995b29498"
  } ],
  "description": "Conditional Response added in Entry fulfillment"
}
